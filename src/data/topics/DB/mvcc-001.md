---
id: mvcc-001
title: MVCC (다중 버전 동시성 제어)
category: fundamental
subcategory: 데이터베이스
subjectCategories:
  - DB
difficulty: advanced
certifications:
  - information-management
  - computer-systems
keywords:
  - MVCC
  - Multi-Version Concurrency Control
  - 스냅샷 격리
  - 동시성 제어
  - Lock-Free
importance: 4
relatedTopics:
  - transaction-001
  - distributed-db-001
trends:
  - Distributed MVCC
tags:
  - '2025'
---

# 정의
트랜잭션마다 데이터의 여러 버전을 유지하여 읽기 작업 시 Lock 없이 높은 동시성을 제공하는 동시성 제어 기법입니다.

## 특징
- 원리: 데이터 수정 시 새 버전 생성, 이전 버전 유지
- 읽기: Lock 없이 트랜잭션 시작 시점의 스냅샷 읽기
- 쓰기: 새 버전 생성, 다른 트랜잭션의 읽기 블로킹 없음
- 장점: 읽기-쓰기 충돌 없음, 높은 동시성, 일관된 읽기
- 단점: 저장 공간 증가, 버전 정리(Vacuum) 필요
- 구현: PostgreSQL, MySQL InnoDB, Oracle
- Snapshot Isolation: 트랜잭션별 일관된 스냅샷 제공
- Write Skew: MVCC에서 발생 가능한 이상 현상

## 동작원리
MVCC(다중 버전 동시성 제어)는 다음과 같은 방식으로 동작하여 높은 동시성과 일관된 데이터 읽기를 제공합니다.

1.  **데이터 버전 관리**:
    -   MVCC를 사용하는 데이터베이스에서는 데이터가 수정될 때마다 새로운 버전의 데이터를 생성하여 저장합니다. 기존 데이터는 즉시 덮어쓰지 않고, 일정 기간 동안 이전 버전으로 유지됩니다.
    -   각 데이터 버전에는 일반적으로 생성 시점(트랜잭션 ID)과 만료 시점(트랜잭션 ID) 정보가 포함됩니다.

2.  **트랜잭션 ID (Transaction ID)**:
    -   모든 트랜잭션에는 고유한 트랜잭션 ID가 할당됩니다. 이 ID는 트랜잭션의 시작과 종료 시점을 나타내는 데 사용됩니다.
    -   데이터 버전의 생성 및 만료 시점을 기록하는 데 활용됩니다.

3.  **읽기 (Read) 작업**:
    -   **스냅샷 격리 (Snapshot Isolation)**: 읽기 트랜잭션이 시작될 때, 데이터베이스는 해당 트랜잭션을 위한 특정 시점의 데이터 스냅샷을 생성합니다.
    -   읽기 트랜잭션은 자신이 시작된 시점보다 먼저 커밋된 데이터 버전만을 읽습니다. 즉, 현재 진행 중이거나 아직 커밋되지 않은 다른 트랜잭션의 변경 사항은 보지 않습니다.
    -   이로 인해 읽기 작업은 쓰기 작업에 의해 블로킹되지 않으며(Lock-Free Read), 항상 일관된 데이터를 읽을 수 있습니다(Consistent Read).

4.  **쓰기 (Write) 작업**:
    -   쓰기 트랜잭션이 데이터를 수정하려고 할 때, 해당 데이터의 새로운 버전을 생성합니다.
    -   새로운 버전의 데이터에는 현재 쓰기 트랜잭션의 ID가 생성 시점으로 기록됩니다.
    -   이때, 다른 읽기 트랜잭션들은 여전히 이전 버전의 데이터를 읽고 있으므로, 쓰기 트랜잭션에 의해 블로킹되지 않습니다.
    -   **쓰기-쓰기 충돌 (Write-Write Conflict)**: 만약 두 개 이상의 쓰기 트랜잭션이 동일한 데이터를 동시에 수정하려고 하면, MVCC는 충돌 감지 및 해결 메커니즘을 통해 하나의 트랜잭션만 성공하고 나머지는 롤백되도록 합니다.

5.  **버전 삭제 (Garbage Collection / Vacuum)**:
    -   더 이상 어떤 트랜잭션도 참조하지 않는 오래된 데이터 버전은 디스크 공간 확보를 위해 주기적으로 삭제됩니다 (Vacuuming).
    -   이 과정은 일반적으로 백그라운드에서 실행되어 시스템 성능에 미치는 영향을 최소화합니다.

MVCC의 핵심은 데이터의 여러 버전을 유지하여 읽기 작업과 쓰기 작업이 서로를 방해하지 않고 동시에 수행될 수 있도록 하는 것입니다. 이를 통해 데이터베이스의 동시성과 처리량(Throughput)을 크게 향상시킬 수 있습니다.
